# Конфигурация виртуального хоста Nginx
server {
    listen 80;  # Порт HTTP
    server_name {{ ansible_default_ipv4.address }};  # IP адрес сервера

    root {{ website_remote_path | default('/var/www/html') }};  # Корневая директория
    index index.html index.htm;  # Файлы индекса

    access_log /var/log/nginx/access.log;  # Лог доступа
    error_log /var/log/nginx/error.log;  # Лог ошибок

    location / {
        try_files $uri $uri/ =404;  # Поиск файлов
    }

    # Базовые настройки безопасности
    add_header X-Frame-Options "SAMEORIGIN" always;  # Защита от clickjacking
    add_header X-Content-Type-Options "nosniff" always;  # Запрет MIME-sniffing
    add_header X-XSS-Protection "1; mode=block" always;  # Защита от XSS
}